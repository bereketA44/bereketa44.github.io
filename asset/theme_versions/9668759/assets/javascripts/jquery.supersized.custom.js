!function(p){p(document).ready(function(){p("body").append('<div id="supersized-loader"></div><ul id="supersized"></ul>')}),p.supersized=function(i){var e="#supersized",d=this;d.$el=p(e),d.el=e,vars=p.supersized.vars,d.$el.data("supersized",d),api=d.$el.data("supersized");var a=theme;d.init=function(){p.supersized.vars=p.extend(p.supersized.vars,p.supersized.themeVars),p.supersized.vars.options=p.extend({},p.supersized.defaultOptions,p.supersized.themeOptions,i),d.options=p.supersized.vars.options,d._build()},d._build=function(){for(var i,e,s=0,t="",a="",n="";s<=d.options.slides.length-1;){switch(d.options.slide_links){case"num":i=s;break;case"name":i=d.options.slides[s].title;break;case"blank":i=""}if(t=t+'<li class="slide-'+s+'"></li>',s==d.options.start_slide-1)d.options.slide_links&&(a=a+'<li class="slide-link-'+s+' current-slide"><a>'+i+"</a></li>"),d.options.thumb_links&&(n=n+'<li class="thumb'+s+" "+(0==s?"first":"")+'">'+(e=d._createThumb(d.options.slides[s]))+"</li>");else if(d.options.slide_links&&(a=a+'<li class="slide-link-'+s+'" ><a>'+i+"</a></li>"),d.options.thumb_links)e=d._createThumb(d.options.slides[s]),n=n+'<li class="thumb'+s+" "+(s==d.options.slides.length-1?"last":"")+" "+(0==s?"first":"")+'">'+e+"</li>";s++}d.options.slide_links&&p(vars.slide_list).html(a),d.options.thumb_links&&vars.thumb_tray.length&&p(vars.thumb_tray).append('<ul id="'+vars.thumb_list.replace("#","")+'">'+n+"</ul>"),p(d.el).append(t),d.options.thumbnail_navigation&&(vars.current_slide-1<0?prevThumb=d.options.slides.length-1:prevThumb=vars.current_slide-1,p(vars.prev_thumb).show().html(p("<img/>").attr("src",d.options.slides[prevThumb].image)),vars.current_slide==d.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1,p(vars.next_thumb).show().html(p("<img/>").attr("src",d.options.slides[nextThumb].image))),d._start()},d._start=function(){d.options.start_slide?vars.current_slide=d.options.start_slide-1:vars.current_slide=Math.floor(Math.random()*d.options.slides.length);d.options.new_window;if(3==d.options.performance?d.$el.addClass("speed"):1!=d.options.performance&&2!=d.options.performance||d.$el.addClass("quality"),d.options.random){arr=d.options.slides;for(var i,e,s=arr.length;s;i=parseInt(Math.random()*s),e=arr[--s],arr[s]=arr[i],arr[i]=e);d.options.slides=arr}if(1<d.options.slides.length){vars.current_slide-1<0?loadPrev=d.options.slides.length-1:loadPrev=vars.current_slide-1;d.options.slides[loadPrev].url&&d.options.slides[loadPrev].url;var t=d._createAsset(d.options.slides[loadPrev]),a=d.el+"> li:eq("+loadPrev+")";2!=d.options.slides.length&&(t.appendTo(a).parent().addClass("image-loading prevslide").addClass(d.options.slides[loadPrev].type),t.load(function(){p(this).data("origwidth",p(this).width()).data("origheight",p(this).height()),d.resizeNow()})),"DIV"==t[0].tagName&&t.load()}else d.options.slideshow=0;var n=d._createAsset(d.options.slides[vars.current_slide]),o=d.el+"> li:eq("+vars.current_slide+")";if(n.appendTo(o).parent().addClass("image-loading activeslide").addClass(d.options.slides[vars.current_slide].type),n.load(function(){d._origDim(p(this)),d.resizeNow(),d.launch(),"undefined"!=typeof theme&&"function"==typeof theme._init&&theme._init()}),1<d.options.slides.length){vars.current_slide==d.options.slides.length-1?loadNext=0:loadNext=vars.current_slide+1;var l=d._createAsset(d.options.slides[loadNext]),r=d.el+"> li:eq("+loadNext+")";l.appendTo(r).parent().addClass("image-loading").addClass(d.options.slides[loadNext].type),l.load(function(){p(this).data("origwidth",p(this).width()).data("origheight",p(this).height()),d.resizeNow()}),"DIV"==l[0].tagName&&l.load()}d.$el.css("visibility","hidden"),p(".load-item").hide(),"DIV"==n[0].tagName&&n.load()},d.launch=function(){d.$el.css("visibility","visible"),p("#supersized-loader").remove(),"undefined"!=typeof theme&&"function"==typeof theme.beforeAnimation&&theme.beforeAnimation("next"),p(".load-item").show(),d.options.keyboard_nav&&p(document.documentElement).keyup(function(i){if(vars.in_animation)return!1;37==i.keyCode||38==i.keyCode?(clearInterval(vars.slideshow_interval),d.prevSlide()):39!=i.keyCode&&40!=i.keyCode||(clearInterval(vars.slideshow_interval),d.nextSlide())}),d.options.autoplay&&p("#thumb-tray").off("hover").on("hover",function(){vars.is_paused?(vars.is_paused=!1,vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval)):(vars.is_paused=!0,clearInterval(vars.slideshow_interval))}),d.options.slideshow&&d.options.pause_hover&&p(d.el).hover(function(){if(vars.in_animation)return!1;vars.hover_pause=!0,vars.is_paused||(vars.hover_pause="resume",d.playToggle())},function(){"resume"==vars.hover_pause&&(d.playToggle(),vars.hover_pause=!1)}),d.options.slide_links&&p(vars.slide_list+"> li").click(function(){return index=p(vars.slide_list+"> li").index(this),targetSlide=index+1,d.goTo(targetSlide),!1}),d.options.thumb_links&&p(vars.thumb_list+"> li").click(function(){return index=p(vars.thumb_list+"> li").index(this),targetSlide=index+1,api.goTo(targetSlide),!1}),d.options.slideshow&&1<d.options.slides.length&&(d.options.autoplay&&1<d.options.slides.length?(vars.slideshow_interval&&clearInterval(vars.slideshow_interval),vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval)):vars.is_paused=!0,p(".load-item img").bind("contextmenu mousedown",function(){return!1})),a.captionBehaviour();var i=window.Theme.Mobile.isDevice?100:0;p(window).resize(function(){setTimeout(function(){d.resizeNow()},i)})},d.resizeNow=function(){return d.$el.each(function(){return d.$el.children().each(function(){function e(i){i?(t.width()<a||t.width()<d.options.min_width)&&(t.width()*o>=d.options.min_height?(t.width(d.options.min_width),t.height(t.width()*o)):s()):d.options.min_height>=n&&!d.options.fit_landscape?a*o>=d.options.min_height||a*o>=d.options.min_height&&o<=1?(t.width(a),t.height(a*o)):1<o?(t.height(d.options.min_height),t.width(t.height()/o)):t.width()<a&&(t.width(a),t.height(t.width()*o)):(t.width(a),t.height(a*o))}function s(i){i?t.height()<n&&(t.height()/o>=d.options.min_width?(t.height(d.options.min_height),t.width(t.height()/o)):e(!0)):d.options.min_width>=a?n/o>=d.options.min_width||1<o?(t.height(n),t.width(n/o)):o<=1&&(t.width(d.options.min_width),t.height(t.width()*o)):(t.height(n),t.width(n/o))}var t=p(this).children(0),a=(p("#menu_bar").height(),d.$el.width()),n=d.$el.height();if(p(this).hasClass("image")){var o=((t=p(this).find("img")).data("origheight")/t.data("origwidth")).toFixed(2);d.options.fit_always||!d.options.fit_always&&1<=o&&_4ORMAT_DATA.theme.dont_crop_portrait_images||a<767?o<n/a?e():s():n<=d.options.min_height&&a<=d.options.min_width?o<n/a?d.options.fit_landscape&&o<1?e(!0):s(!0):d.options.fit_portrait&&1<=o?s(!0):e(!0):a<=d.options.min_width?o<n/a?d.options.fit_landscape&&o<1?e(!0):s():d.options.fit_portrait&&1<=o?s():e(!0):n<=d.options.min_height?o<n/a?d.options.fit_landscape&&o<1?e():s(!0):d.options.fit_portrait&&1<=o?s(!0):e():o<n/a?d.options.fit_landscape&&o<1?e():s():d.options.fit_portrait&&1<=o?s():e(),t.parents("li").hasClass("image-loading")&&p(".image-loading").removeClass("image-loading"),d.options.horizontal_center&&t.css("left",(a-t.width())/2)}}),d.options.image_protect&&p("img",d.el).bind("contextmenu mousedown",function(){return!1}),!1})},d.nextSlide=function(){if(vars.in_animation||!api.options.slideshow)return!1;vars.in_animation=!0;d.options.slides;var i=d.$el.find(".activeslide");p(".prevslide").removeClass("prevslide"),i.removeClass("activeslide").addClass("prevslide"),vars.current_slide+1==d.options.slides.length?vars.current_slide=0:vars.current_slide++;var e=p(d.el+"> li:eq("+vars.current_slide+")");d.$el.find(".prevslide");1==d.options.performance&&d.$el.removeClass("quality").addClass("speed"),loadSlide=!1,vars.current_slide==d.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;var s=d.el+"> li:eq("+loadSlide+")";if(!p(s).html()){d.options.new_window;imageLink=d.options.slides[loadSlide].url?"href='"+d.options.slides[loadSlide].url+"'":"";var t=d._createAsset(d.options.slides[loadSlide]);t.appendTo(s).parent().addClass("image-loading").addClass(d.options.slides[loadSlide].type).css("visibility","hidden"),t.load(function(){d._origDim(p(this)),d.resizeNow(),a.captionBehaviour()}),"DIV"==t[0].tagName&&t.load()}switch(1==d.options.thumbnail_navigation&&(vars.current_slide-1<0?prevThumb=d.options.slides.length-1:prevThumb=vars.current_slide-1,p(vars.prev_thumb).html(p("<img/>").attr("src",d.options.slides[prevThumb].image)),nextThumb=loadSlide,p(vars.next_thumb).html(p("<img/>").attr("src",d.options.slides[nextThumb].image))),"undefined"!=typeof theme&&"function"==typeof theme.beforeAnimation&&theme.beforeAnimation("next"),d.options.slide_links&&(p(".current-slide").removeClass("current-slide"),p(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")),e.css("visibility","hidden").addClass("activeslide"),d.options.transition){case 0:case"none":e.css("visibility","visible"),vars.in_animation=!1;break;case 1:case"fade":e.animate({opacity:0},0).css("visibility","visible").animate({opacity:1,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 2:case"slideTop":e.animate({top:-d.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 3:case"slideRight":e.animate({left:d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 4:case"slideBottom":e.animate({top:d.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 5:case"slideLeft":e.animate({left:-d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 6:case"carouselRight":e.animate({left:d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()}),i.animate({left:-d.$el.width(),avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing);break;case 7:case"carouselLeft":e.animate({left:-d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_w,d.options.transition_easing,function(){d.afterAnimation()}),i.animate({left:d.$el.width(),avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing)}return!1},d.prevSlide=function(){if(vars.in_animation||!api.options.slideshow)return!1;vars.in_animation=!0;d.options.slides;var i=d.$el.find(".activeslide");p(".prevslide").removeClass("prevslide"),i.removeClass("activeslide").addClass("prevslide"),0==vars.current_slide?vars.current_slide=d.options.slides.length-1:vars.current_slide--;var e=p(d.el+"> li:eq("+vars.current_slide+")");d.$el.find(".prevslide");1==d.options.performance&&d.$el.removeClass("quality").addClass("speed"),loadSlide=!1,vars.current_slide-1<0?loadSlide=d.options.slides.length-1:loadSlide=vars.current_slide-1;var s=d.el+"> li:eq("+loadSlide+")";if(!p(s).html()){d.options.new_window;imageLink=d.options.slides[loadSlide].url?"href='"+d.options.slides[loadSlide].url+"'":"";var t=d._createAsset(d.options.slides[loadSlide]);t.appendTo(s).parent().addClass("image-loading").addClass(d.options.slides[loadSlide].type).css("visibility","hidden"),t.load(function(){d._origDim(p(this)),d.resizeNow()}),"DIV"==t[0].tagName&&t.load()}switch(1==d.options.thumbnail_navigation&&(prevThumb=loadSlide,p(vars.prev_thumb).html(p("<img/>").attr("src",d.options.slides[prevThumb].image)),vars.current_slide==d.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1,p(vars.next_thumb).html(p("<img/>").attr("src",d.options.slides[nextThumb].image))),"undefined"!=typeof theme&&"function"==typeof theme.beforeAnimation&&theme.beforeAnimation("prev"),d.options.slide_links&&(p(".current-slide").removeClass("current-slide"),p(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")),e.css("visibility","hidden").addClass("activeslide"),d.options.transition){case 0:case"none":e.css("visibility","visible"),vars.in_animation=!1,d.afterAnimation();break;case 1:case"fade":e.animate({opacity:0},0).css("visibility","visible").animate({opacity:1,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 2:case"slideTop":e.animate({top:d.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 3:case"slideRight":e.animate({left:-d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 4:case"slideBottom":e.animate({top:-d.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 5:case"slideLeft":e.animate({left:d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()});break;case 6:case"carouselRight":e.animate({left:-d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()}),i.animate({left:0},0).animate({left:d.$el.width(),avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing);break;case 7:case"carouselLeft":e.animate({left:d.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing,function(){d.afterAnimation()}),i.animate({left:0},0).animate({left:-d.$el.width(),avoidTransforms:!1},d.options.transition_speed,d.options.transition_easing)}return!1},d.playToggle=function(){return vars.in_animation||!api.options.slideshow||(vars.is_paused?(vars.is_paused=!1,"undefined"!=typeof theme&&"function"==typeof theme.playToggle&&theme.playToggle("play"),vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval)):(vars.is_paused=!0,"undefined"!=typeof theme&&"function"==typeof theme.playToggle&&theme.playToggle("pause"),clearInterval(vars.slideshow_interval))),!1},d.goTo=function(i){if(vars.in_animation||!api.options.slideshow)return!1;var e=d.options.slides.length;if(i<0?i=e:e<i&&(i=1),i=e-i+1,clearInterval(vars.slideshow_interval),"undefined"!=typeof theme&&"function"==typeof theme.goTo&&theme.goTo(),vars.current_slide==e-i)return vars.is_paused||(vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval)),!1;e-i>vars.current_slide?(vars.current_slide=e-i-1,vars.update_images="next",d._placeSlide(vars.update_images),d._placeSlide("prev")):e-i<vars.current_slide&&(vars.current_slide=e-i+1,vars.update_images="prev",d._placeSlide(vars.update_images)),d.options.slide_links&&(p(vars.slide_list+"> .current-slide").removeClass("current-slide"),p(vars.slide_list+"> li").eq(e-i).addClass("current-slide")),d.options.thumb_links&&(p(vars.thumb_list+"> .current-thumb").removeClass("current-thumb"),p(vars.thumb_list+"> li").eq(e-i).addClass("current-thumb"))},d._placeSlide=function(i){d.options.new_window;if(loadSlide=!1,"next"==i){vars.current_slide==d.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;var e=d.el+"> li:eq("+loadSlide+")";if(!p(e).html()){d.options.new_window;imageLink=d.options.slides[loadSlide].url?"href='"+d.options.slides[loadSlide].url+"'":"",(s=d._createAsset(d.options.slides[loadSlide])).appendTo(e).parent().addClass("image-loading").addClass(d.options.slides[loadSlide].type).css("visibility","hidden"),s.load(function(){d._origDim(p(this)),d.resizeNow()}),"DIV"==s[0].tagName&&s.load()}d.nextSlide()}else if("prev"==i){vars.current_slide-1<0?loadSlide=d.options.slides.length-1:loadSlide=vars.current_slide-1;e=d.el+"> li:eq("+loadSlide+")";if(!p(e).html()){var s;d.options.new_window;imageLink=d.options.slides[loadSlide].url?"href='"+d.options.slides[loadSlide].url+"'":"",(s=d._createAsset(d.options.slides[loadSlide])).appendTo(e).parent().addClass("image-loading").addClass(d.options.slides[loadSlide].type).css("visibility","hidden"),s.load(function(){d._origDim(p(this)),d.resizeNow()}),"DIV"==s[0].tagName&&s.load()}d.prevSlide()}},d._origDim=function(i){i.data("origwidth",i.width()).data("origheight",i.height())},d.afterAnimation=function(){1==d.options.performance&&d.$el.removeClass("speed").addClass("quality");var i=d.$el.width(),e=d.$el.children(".activeslide").children("img");return e.css("left",(i-e.width())/2),vars.update_images&&(vars.current_slide-1<0?setPrev=d.options.slides.length-1:setPrev=vars.current_slide-1,vars.update_images=!1,p(".prevslide").removeClass("prevslide"),p(d.el+"> li:eq("+setPrev+")").addClass("prevslide")),vars.in_animation=!1,"undefined"!=typeof theme&&"function"==typeof theme.afterAnimation&&theme.afterAnimation(),!1},d.getField=function(i){return d.options.slides[vars.current_slide][i]},d._createAsset=function(i){switch(i.type){case"image":return i.copy?p('<div class="image-wrap"><img data-src="'+i.image_url_1600x1200+'" class="lazyload" data-sizes="auto" data-origwidth="'+i.image_dimensions_1200x0[0]+'" data-origheight="'+i.image_dimensions_1200x0[1]+'" alt="'+i.alt_text+'"/><a href="#" class="captionToggle"></a><div class="caption">'+i.copy+"</div></div>"):p('<div class="image-wrap"><img data-src="'+i.image_url_1600x1200+'" class="lazyload" data-sizes="auto" data-origwidth="'+i.image_dimensions_1200x0[0]+'" data-origheight="'+i.image_dimensions_1200x0[1]+'" alt="'+i.alt_text+'" /></div>');case"text":return p('<div class="text-wrap"><div class="padding-wrapper"><div class="wrap">'+i.copy+"</div></div></div>");case"video":if(i.embed){var e=p(window).height()-p("#menu_bar_background").height()-100;if(thumbnail='<span class="video-thumbnail"><img src="'+i.thumbnail_url+'" alt=""></span>',i.copy){var s=i.video_ratio<1.5?"max-width:"+i.video_ratio*e+"px":"";return p('<div class="padding-wrapper video" style="'+s+'"><div class="wrap has_copy"><div style="padding-bottom: '+100/i.video_ratio+'%" class="preview"><iframe src="'+i.iframe_url+'&autopause=1" width="100%" height="100%" allowfullscreen />'+thumbnail+'</div><a href="#" class="captionToggle"></a><div class="caption">'+i.copy+"</div></div></div>")}s=i.video_ratio<1.5?"max-width:"+i.video_ratio*e+"px":"";return p('<div class="padding-wrapper video" style="'+s+'"><div class="wrap"><div style="padding-bottom: '+100/i.video_ratio+'%" class="preview"><iframe src="'+i.iframe_url+'" width="100%" height="100%" allowfullscreen />'+thumbnail+"</div></div></div>")}}},d._createThumb=function(i){switch(i.type){case"video":return'<span class="video-overlay"></span><span class="video-thumb">&#xe007;</span><canvas style="background-image:url('+i.thumbnail_url_200x200+');background-color:#000;" class="img-placeholder" width="'+i.video_width+'" height="'+i.video_height+'"></canvas>';case"text":return'<a href="#"><span class="no-image"></span></a>';case"image":var e=_4ORMAT_DATA.theme.gallery_thumb_shape?i.image_url_300x300:i.image_url_0x150,s=i.dominant_color?i.dominant_color:"#eee",t=_4ORMAT_DATA.theme.gallery_thumb_shape?300:i.image_dimensions_0x150[0],a=_4ORMAT_DATA.theme.gallery_thumb_shape?300:i.image_dimensions_0x150[1];return'<img data-src="'+e+'" width="'+function(){switch(_4ORMAT_DATA.theme.thumbs_height){case"Small":return 100;case"Medium":return 128;case"Large":return 150}}()+'" class="lazyload" /><canvas class="img-placeholder" width="'+t+'" height="'+a+'" style="background-color:'+s+'"></canvas>'}},d.init()},p.supersized.vars={thumb_tray:"#thumb-tray",thumb_list:"#thumb-list",slide_list:"#slide-list",current_slide:0,in_animation:!1,is_paused:!1,hover_pause:!1,slideshow_interval:!1,update_images:!1,options:{}},p.supersized.defaultOptions={slideshow:1,autoplay:1,start_slide:1,stop_loop:1,random:0,slide_interval:5e3,transition:1,transition_speed:750,transition_easing:"swing",new_window:1,pause_hover:0,keyboard_nav:1,performance:1,image_protect:1,fit_always:0,fit_landscape:0,fit_portrait:0,min_width:0,min_height:0,horizontal_center:1,vertical_center:1,slide_links:1,thumb_links:1,thumbnail_navigation:0},p.fn.supersized=function(i){return this.each(function(){new p.supersized(i)})}}(jQuery);