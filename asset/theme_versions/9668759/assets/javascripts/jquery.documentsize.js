// Copyright (c)2015 Michael Heim, Zeilenwechsel.de
!function(e){"use strict";function t(e,t){var o,n,i,r,d,u=t.window,l=0!==p(),c=t.useLayoutViewport&&"Width"===e,m=l||!w()||c,a=m?u.document.documentElement["client"+e]:s(e,u);return t.useLayoutViewport&&!m&&(n=a,i=f(u,{asRange:!0}),a=Math.round(n*i.calculated),y()||(o=u.document.documentElement.clientHeight,r=(n-1)*i.min,d=(n+1)*i.max,(a<=o+3&&o-3<=a||r<=o&&o<=d&&d<o+30)&&(a=o))),a}function f(e,t){var o,n,i=t&&t.asRange,r={calculated:1,min:1,max:1};return 0!==p()||!w()||(e||(e=window),o=e.document.documentElement.clientWidth,n=a(e),r.calculated=o/n,i&&(y()?r.min=r.max=r.calculated:(r.min=o/(n+1),r.max=o/(n-1)))),i?r:r.calculated}function o(e){var t,o,n,i=window,r=!0;return e&&e.length&&((t=v((e=Array.prototype.slice.call(e))[0]))||(e[0]=u(e[0])),(o=!t&&e[0])||(e[1]=u(e[1])),n=!o&&e[1],t?(i=e[0],n&&e[1].viewport&&(r=d(e[1].viewport))):o?(e[0].viewport&&(r=d(e[0].viewport)),v(e[1])&&(i=e[1])):!e[0]&&e[1]&&(n&&e[1].viewport?r=d(e[1].viewport):v(e[1])&&(i=e[1]))),{window:i,useVisualViewport:r,useLayoutViewport:!r}}function d(e){var t=r(e)&&e.toLowerCase();if(e&&!t)throw new Error("Invalid viewport option: "+e);if(t&&"visual"!==t&&"layout"!==t)throw new Error("Invalid viewport name: "+e);return"visual"===t}function u(e){return r(e)&&""!==e?{viewport:e}:e}function w(){return x===undefined&&(x=10<a()),x}function p(){var e;return b===undefined&&((e=document.createElement("div")).style.cssText="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -500px; left: -500px; margin: 0px; padding: 0px; border: none;",document.body.appendChild(e),b=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),b}function n(){var e,t,o,n,i=l(),r=i&&i.contentDocument||document,d=r.body,u=r!==document;(t=r.createElement("div")).style.cssText="width: 1px; height: 1px; position: relative; top: 0px; left: 32000px;",u||(e=c()),o=d.scrollWidth,d.appendChild(t),n=o!==d.scrollWidth,d.removeChild(t),u||m(e),E=n?"documentElement":"body",document.body.removeChild(i)}function l(){var e=document.createElement("iframe"),t=document.body;if(e.style.cssText="position: absolute; top: -600px; left: -600px; width: 500px; height: 500px; margin: 0px; padding: 0px; border: none; display: block;",e.frameborder="0",t.appendChild(e),e.src="about:blank",e.contentDocument)return e.contentDocument.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><title></title><style type="text/css">html, body { overflow: hidden; }</style></head><body></body></html>'),e}function c(){var e,t,o=document.documentElement,n=document.body,i=C?window.getComputedStyle(o,null):o.currentStyle,r=C?window.getComputedStyle(n,null):n.currentStyle,d=(i.overflowX||i.overflow||"visible").toLowerCase(),u="hidden"!==(r.overflowX||r.overflow||"visible").toLowerCase(),l="visible"===d,c={documentElement:{modified:l},body:{modified:u}};return l&&(e=o.style,c.documentElement.styleOverflowX=e.overflowX,e.overflowX="auto"),u&&(t=n.style,c.body.styleOverflowX=t.overflowX,t.overflowX="hidden"),c}function m(e){e.documentElement.modified&&(document.documentElement.style.overflowX=e.documentElement.styleOverflowX),e.body.modified&&(document.body.style.overflowX=e.body.styleOverflowX)}function a(e){return s("Width",e)}function s(e,t){var o=(t||window)["inner"+e];return o&&i(o),o}function i(e){!g&&h(e)&&(g=!0)}function y(){return!!g}function v(e){return null!=e&&e.window==e}function r(e){return"string"==typeof e||e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)||!1}function h(e){return e===+e&&e!==(0|e)}var b,x,g,E,C=!!window.getComputedStyle;e.documentWidth=function(e){return e||(e=document),E===undefined&&n(),e[E].scrollWidth},e.documentHeight=function(e){return e||(e=document),E===undefined&&n(),e[E].scrollHeight},e.windowWidth=function(){return t("Width",o(arguments))},e.windowHeight=function(){return t("Height",o(arguments))},e.pinchZoomFactor=function(e){return f(e)},e.scrollbarWidth=p,"function"==typeof e&&e(function(){E===undefined&&n(),p()})}("undefined"!=typeof jQuery?jQuery:"undefined"!=typeof Zepto?Zepto:$);