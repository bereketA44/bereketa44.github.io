window.Theme=window.Theme||{name:"Sun",init:function(){this.Turbolinks.init(),this.reload(),this.bindEvents()},reload:function(){window.Theme.Gallery.thumbs_api=null,this.initEasings(),this.categoryPosition(),this.initJSForPageType(),this.positionContentContainer(),this.calculateMenuLayout()},bindEvents:function(){$(window).resize(this.switchMobile),$(window).resize(this.calculateMenuLayout),$(window).resize(this.positionContentContainer)},initJSForPageType:function(){"listing"===_4ORMAT_DATA.page.type&&window.Theme.Listing.init(),$(window).resize(window.Theme.Listing.resize),"gallery"===_4ORMAT_DATA.page.type&&($("body").hasClass("unauthorized")||window.Theme.Gallery.init()),window.matchMedia("(max-width: 767px)").matches?window.Theme.Mobile.init():window.Theme.Mobile.noBounceDisable()},initEasings:function(){$.extend($.easing,{def:"easeInOutQuart",swing:function(e,i,t,n,o){return jQuery.easing[jQuery.easing.def](e,i,t,n,o)},easeInOutQuart:function(e,i,t,n,o){return(i/=o/2)<1?n/2*i*i*i*i+t:-n/2*((i-=2)*i*i*i-2)+t},easeOutElastic:function(e,i,t,n,o){var a=1.70158,s=0,d=n;return 0===i?t:1==(i/=o)?t+n:(s||(s=.3*o),d<Math.abs(n)?(d=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/d),d*Math.pow(2,-10*i)*Math.sin((i*o-a)*(2*Math.PI)/s)+n+t)}})},categoryPosition:function(){$(".dropdown").each(function(){categoryHeight=$(this).siblings(".category_name").outerHeight(!0),"Bottom"===_4ORMAT_DATA.theme.menu_bar_position?$(this).css("bottom",categoryHeight):$(this).css("top",categoryHeight)})},positionContentContainer:function(){var e=window.matchMedia("(max-width: 767px)").matches?$(".mobileMenu").height():$("#menu_bar .menu_items").height(),i=$("._4ORMAT_content_page_row:first-child").hasClass("_4ORMAT_full_width_module"),t="Top"===_4ORMAT_DATA.theme.menu_bar_position&&!_4ORMAT_DATA.theme.background_menu_bar_enabled,n="Top"===_4ORMAT_DATA.theme.menu_bar_position&&_4ORMAT_DATA.theme.background_menu_bar_enabled,o="Bottom"===_4ORMAT_DATA.theme.menu_bar_position,a=i?0:20,s=i&&(t||o)||window.matchMedia("(max-width: 767px) and (orientation: landscape)").matches?0:e+a;window.matchMedia("(min-width: 768px)").matches?("Bottom"===_4ORMAT_DATA.theme.menu_bar_position?$("#content .background").css("padding-bottom",e+20):$("#content").css("padding-top",s),"Bottom of Page"===_4ORMAT_DATA.theme.post_text_placement&&$("#content .background").css("min-height",window.innerHeight-e-52)):($("#content").css("padding-top",s),"gallery"===_4ORMAT_DATA.page.type&&76<e&&$("#supersized").css({"margin-top":e,height:window.innerHeight-e-70})),i&&(t||o?$("#content, ._4ORMAT_content_wrapper, ._4ORMAT_full_width_module").css("padding-top",0):n&&($("._4ORMAT_content_wrapper, ._4ORMAT_full_width_module").css("padding-top",0),$("#content").css("padding-top",s))),$("#content").addClass("show")},calculateMenuLayout:function(){if("Center"==_4ORMAT_DATA.theme.menu_bar_alignment){var e=$(".menu_logo").offset().left;$("nav").css("max-width",e-50)}},switchMobile:function(){window.matchMedia("(max-width: 767px)").matches&&window.Theme.Mobile.init()}},window.Theme.Turbolinks=window.Theme.Turbolinks||{init:function(){$(window).on("page:update",this.onUpdate.bind(this)),$(window).on("page:before-change",this.onBeforeChange.bind(this)),$(window).on("page:load",this.onPageLoad.bind(this)),$(window).on("page:before-unload",this.onBeforeUnload.bind(this)),$(window).on("page:restore",this.onRestore.bind(this))},onBeforeUnload:function(){},onPageLoad:function(){$("body").addClass("is-changing"),setTimeout(function(){$("body").removeClass("is-changing")},100),window.Theme.Mobile.isDevice||$(window).on("debouncedresize",function(){window.matchMedia("(max-width: 767px)").matches?window.Theme.Mobile.init():(window.Theme.Mobile.noBounceDisable(),$("#thumb-tray").insertAfter($("#menu_bar")))}),window.Theme.reload()},onBeforeChange:function(e){e.preventDefault(),$("body").addClass("is-changing"),Turbolinks.visit(e.originalEvent.data.url),$.supersized&&(clearInterval($.supersized.vars.slideshow_interval),$.supersized.vars.is_paused=!1,$.supersized.vars.in_animation=!1),api&&api.options&&(api.options.slideshow=!1)},onUpdate:function(){},onRestore:function(){}},window.Theme.Listing=window.Theme.Listing||{init:function(){this.animation(),this.initMasonry()},initMasonry:function(){$(".masonry").length&&$(".masonry").masonry({itemSelector:".grid-item",transitionDuration:0})},animation:function(){$(".asset, .page-asset").each(function(e){var i=$(this);setTimeout(function(){i.addClass("asset-loaded")},100*e)})}},window.Theme.Gallery=window.Theme.Gallery||{thumbs_api:null,slides_api:null,curr_slide:null,curr_wrap:null,prev_slide:null,b_height:null,i_timeout:0,init:function(){_4ORMAT_DATA.theme.gallery_thumb_tray&&(setTimeout(function(){window.Theme.Gallery.prepThumbs()},1e3),window.matchMedia("(min-width: 768px)").matches&&$(window).load(function(){var e;e="Bottom"===_4ORMAT_DATA.theme.menu_bar_position?"bottom":"top",window.Theme.Gallery.b_height=$("#menu_bar").outerHeight(),$("#thumb-tray").css(e,window.Theme.Gallery.b_height)})),$("#supersized").length||$("body").append('<div id="supersized-loader"></div><ul id="supersized"></ul>');var t=_4ORMAT_DATA.page.assets;if(_4ORMAT_DATA.page.title&&_4ORMAT_DATA.page.title.copy_alignment!==undefined){var e=_4ORMAT_DATA.page.title;e.original_type=e.type,e.image_url&&"left"!==e.copy_alignment?e.type="image":e.type="text",t.unshift(e)}for(var i=/missing/,n=0;n<t.length;n++)"image"!==t[n].type&&i.test(t[n].image_url_0x150)?t[n].thumb="":t[n].thumb=t[n].image_url_0x150;var o,a=parseInt(location.hash.slice(1),10),s=0<a&&a<=t.length?a:1,d="Fade"===_4ORMAT_DATA.theme.slide_transition?1:6;switch(_4ORMAT_DATA.theme.slide_transition_speed){case"Regular":o=500;break;case"Fast":o=250;break;case"Slow":o=800}var h=_4ORMAT_DATA.theme.fullscreen_images?0:1,r=_4ORMAT_DATA.theme.auto_advance_slides?1:0;$.supersized({autoplay:r,start_slide:s,transition:d,transition_speed:o,transition_easing:"easeInOutQuart",fit_always:h,image_protect:0,slide_links:"empty",thumb_links:_4ORMAT_DATA.theme.gallery_thumb_tray,thumbnail_navigation:0,slides:t}),window.onpopstate=function(){var e=parseInt(location.hash.slice(1),10),i=0<e&&e<=t.length?e:1;1<i&&api.goTo(i)};var l,u=window.Theme.Gallery;$("#supersized").children("li");u.curr_slide=$("#supersized").children(".activeslide"),window.Theme.Gallery.resizeVideos(),$("li img").attr("nopin","true"),u.curr_slide.find("img").attr("nopin",""),l="Bottom"===_4ORMAT_DATA.theme.menu_bar_position?"bottom":"top",$("#supersized").on("click",".video-thumbnail",function(){$(this).hide()}),$(window).resize(function(){u.b_height=$("#menu_bar").outerHeight(),_4ORMAT_DATA.theme.gallery_thumb_tray&&(window.matchMedia("(max-width: 767px)").matches?$("#thumb-tray").css("bottom",0):$("#thumb-tray").stop(!0).removeClass("active").css(l,u.b_height)),window.matchMedia("(max-width: 767px)").matches&&($(window).width()>$(window).height()?$("body.gallery .padding-wrapper.video").each(function(){$(this).addClass("vert")}):$("body.gallery .padding-wrapper.video").each(function(){$(this).removeClass("vert")}))}),$(window).on("debouncedresize",function(){window.Theme.Gallery.resizeVideos();var e=window.Theme.Mobile;if(window.matchMedia("(max-width: 767px)").matches&&$("#thumb-tray").css("bottom",i),e.isMobile){e.getViewportHeight();var i=e.getBrowserToolbarHeight();e.isLandscape?(e.isSafari&&e.noBounceEnable(),u.curr_slide&&u.curr_slide.find(".jspPane")&&u.curr_slide.find(".jspPane").height()>$(window).height()&&e.noBounceDisable()):e.noBounceDisable()}$(".activeslide .text-wrap .wrap"),$("aside.mobileMenu.mobile-content-top").outerHeight(),$("#thumb-list").outerHeight(),$(window).height()}),u.b_height=$("#menu_bar").outerHeight(),$("#thumb-list li").each(function(e,i){t[e].alt_text&&$(i).find("img").attr("alt",t[e].alt_text)}),_4ORMAT_DATA.theme.gallery_dominant_color_background&&$("#supersized li").each(function(e,i){t[e].dominant_color&&$(i).css("background",t[e].dominant_color)}),window.Theme.Mobile.isDevice&&this.swipeGallery(),_4ORMAT_DATA.theme.gallery_thumb_tray&&window.matchMedia("(min-width: 768px)").matches&&u.showHideThumbs()},resizeVideos:function(){if($videoWrap=$(".padding-wrapper.video"),$videoWrap.length){var e=$("#supersized").height();if(e<$videoWrap.find(".wrap").height())if($videoWrap.find(".has_copy")){var i=$videoWrap.find(".copy").height();$videoWrap.css("height",e-i)}else $videoWrap.css("height",e);else $videoWrap.css("height","auto")}},prepThumbs:function(){window.Theme.Gallery.setThumbsWidth(),$(".activeslide").find("img").attr("alt",$(".current-thumb img").attr("alt"))},animationCascade:function(e){"forward"===e?$("#thumb-tray li").addClass("asset-loaded"):$("#thumb-tray li").removeClass("asset-loaded")},showHideThumbs:function(){var e;if(e="Bottom"===_4ORMAT_DATA.theme.menu_bar_position?"bottom":"top",window.matchMedia("(max-width: 767px)").matches){var i=function(e){$("#thumb-tray").stop(!0).removeClass("active").animate({bottom:"-170px"},300),e.stopPropagation(),$("#menu_bar").one("touchstart",t)},t=function(e){$("#thumb-tray").addClass("active"),$("#thumb-tray").stop(!0).addClass("active").animate({bottom:Gallery.b_height+"px"},300),e.stopPropagation(),$(document).one("touchstart",i)};$("#menu_bar").one("touchstart",t),$("#thumb-tray").on("touchstart",function(e){e.stopPropagation()})}else $("#thumb-tray").css(e,window.Theme.Gallery.b_height+"px"),$("#menu_bar").mouseenter(function(){window.Theme.Gallery.animationCascade("forward"),$("#thumb-tray").addClass("active")}),$("#menu_bar").mouseleave(function(){window.Theme.Gallery.animationCascade("backward"),$("#thumb-tray").removeClass("active")})},setThumbsWidth:function(){if($("#thumb-list").css("opacity",1),!_4ORMAT_DATA.theme.gallery_thumb_tray)return!1;var t=0;$("#thumb-list li").each(function(e,i){t+=$(i).outerWidth(!0)}),$("#thumb-list").width(t+1),window.matchMedia("(max-width: 767px)").matches?$("#thumb-tray").css("visibility","visible").jScrollPane({animateDuration:0}):$("#thumb-tray").css("visibility","visible").jScrollPane(),window.Theme.Gallery.thumbs_api&&"gallery"===_4ORMAT_DATA.page.type&&setTimeout(function(){var e=$("#thumb-list li.current-thumb");window.Theme.Gallery.thumbs_api.scrollToElement(e,!1,!0,($(window).width()-e.outerWidth())/2,!0)},100),$(window).on("debouncedresize",function(){window.matchMedia("(max-width: 767px)").matches?$("#thumb-tray").jScrollPane({animateDuration:0}):$("#thumb-tray").jScrollPane(),t<=$(window).width()&&0!==$("#thumb-tray .jspPane").css("left")&&$("#thumb-tray .jspPane").css("left",0)})},isZoomActive:function(){return 1<window.detectZoom.zoom()},swipeGallery:function(){$("#supersized").on("swiped-left",function(){window.Theme.Gallery.isZoomActive()||$("#next_slide").trigger("click")}),$("#supersized").on("swiped-right",function(){window.Theme.Gallery.isZoomActive()||$("#prev_slide").trigger("click")})}},window.Theme.Mobile=window.Theme.Mobile||{isMobile:!1,isTablet:-1!=navigator.userAgent.toLowerCase().indexOf("ipad")||"ontouchstart"in window&&768<=$(window).width()&&$(window).width()<=1024,isSafari:!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),isLandscape:$(window).width()>$(window).height(),isAndroid:navigator.userAgent.match(/Android/i),isDevice:navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i),init:function(){this.noBounceDisable(),this.isMobile=!0,this.menu.init(),"gallery"===_4ORMAT_DATA.page.type&&($("#thumb-list").css("opacity",1),$("body").hasClass("unauthorized")||this.gallery.init()),"blog"===_4ORMAT_DATA.page.type&&this.blog.init(),$(window).on("orientationchange",this.onOrientationChange.bind(this)),$(window).on("debouncedresize",this.onSmartResize.bind(this)),$(window).on("resize",this.menu.menuOnWindowResize.bind(this))},getViewportHeight:function(){return"windowHeight"in $?$.windowHeight():$(window).height()},getBrowserToolbarHeight:function(){return $(window).height()-this.getViewportHeight()},noBounceEnable:function(){"iNoBounce"in window&&iNoBounce.enable()},noBounceDisable:function(){"iNoBounce"in window&&iNoBounce.disable()},menu:{lastScrollTop:0,touchStateY:-1,touchState:"displayed",touchMargin:30,init:function(){this.menuPadding(),this.menuPosition(),$(".mobile-menu-trigger").off("click").on("click",this.onTriggerClick.bind(this)),this.thumbPadding(),this.moveUsingFormatToHeader(),$("body").prepend($("#thumb-tray")),$(document).bind("touchstart",this.onTouchStart.bind(this)).bind("touchmove",this.onScrollMove.bind(this)).bind("scroll",this.onScrollMove.bind(this)),this.onCategoryClick()},onScrollMove:function(){var e=$(document).scrollTop();e>this.lastScrollTop+10&&55<e&&"displayed"===this.touchState?($("aside").addClass("hide"),this.touchState="hidden"):e<this.lastScrollTop-10&&"hidden"===this.touchState&&($("aside").removeClass("hide"),this.touchState="displayed"),this.lastScrollTop=e},onTouchStart:function(e){this.touchStateY=e.originalEvent.touches[0].clientY},onTriggerClick:function(){$(window).scrollTop(0),$("#menu_bar").hasClass("opened")?($("#menu_bar").removeClass("opened"),$(".mobile-menu-trigger-close").removeClass("mobile-menu-trigger-close"),$("body").removeClass("mobile-menu-opened").css("height","auto")):($("#menu_bar").addClass("opened"),$(".mobile-menu-trigger").addClass("mobile-menu-trigger-close"),$("#menu_bar").outerHeight()>$(window).height()?$("body").addClass("mobile-menu-opened").css("height",$("#menu_bar").outerHeight()+"px"):$("body").addClass("mobile-menu-opened").css("height",$(window).height()+"px"))},landscapeClose:function(){$(window).scrollTop(0),$("#menu_bar").removeClass("opened"),$(".mobile-menu-trigger-close").removeClass("mobile-menu-trigger-close"),$("body").removeClass("mobile-menu-opened").css("height","auto")},menuPadding:function(){$("#menu_bar").css("min-height",$(window).height()-$("aside.mobileMenu.mobile-content-top").outerHeight()),$("#menu_bar nav").css("margin-top",$("aside.mobileMenu.mobile-content-top").outerHeight())},menuPosition:function(){"Bottom"===_4ORMAT_DATA.theme.menu_bar_position?$("#menu_bar").css("bottom",0):$("#menu_bar").css("top",0)},moveUsingFormatToHeader:function(){$("#menu_bar").append($("#using").clone())},thumbPadding:function(){var e=$("body.gallery #thumb-list li:first"),i=$("body.gallery #thumb-list li:last"),t=e.find("a").width();t||(t=e.find("img").attr("width"));var n=i.find("a").width();n||(n=i.find("img").attr("width")),e.css("margin-left",($(window).width()-t)/2+"px"),i.css("margin-right",($(window).width()-n)/2+"px")},menuOnWindowResize:function(){window.matchMedia("(max-width: 767px)").matches?window.Theme.Mobile.menu.menuPadding():($("#menu_bar").css({"min-height":0,height:$(".menu_items").height()}),window.Theme.Gallery.showHideThumbs(),window.Theme.Gallery.setThumbsWidth())},onCategoryClick:function(){$("#menu .category .category_name").on("click",function(e){e.preventDefault()})}},blog:{init:function(){this.blogPagination(),this.blogVideoHeight()},blogPagination:function(){$(".f_blog_navigation span.f_blog_body_typography").next().addClass("blog-nav-next").prev().prev().addClass("blog-nav-prev"),$(".f_blog_navigation a:first-child").addClass("first"),$(".f_blog_navigation a:last-child").addClass("last")},blogVideoHeight:function(){$("body.simple iframe").each(function(){var e=$(this),i=e.attr("height")/e.attr("width");e.css("max-width","100%"),e.css("max-height",i*($(window).width()-50))})}},gallery:{init:function(){_4ORMAT_DATA.theme.gallery_show_captions=!1,this.heightOfMovies()},heightOfMovies:function(){$(window).width()>$(window).height()&&$("body.gallery .padding-wrapper.video").each(function(){$(this).addClass("vert")})}},onSmartResize:function(){},onOrientationChange:function(){window.Theme.Gallery.i_timeout=0,window.Theme.Mobile.menu.landscapeClose(),window.Theme.Mobile.isAndroid?this.isLandscape=screen.width>screen.height:this.isLandscape=$(window).width()>$(window).height(),this.isLandscape||setTimeout(function(){window.Theme.Gallery.setThumbsWidth()},1e3),$(".slidesjs-pagination-wrapper").each(this.centerThumbsForBlogGalleries.bind(this)),"gallery"===_4ORMAT_DATA.page.type&&setTimeout(function(){var e=$(".activeslide img").width(),i=$("#supersized").width();$(".activeslide img").css("left",(i-e)/2),$("#thumb-tray").css("width",i)},500)},centerThumbsForBlogGalleries:function(e,i){var t=$(i),n=t.find(".slidesjs-pagination"),o=t.width(),a=n.width();a<o&&n.css("left",o/2-a/2)}},$(document).ready(function(){Theme.init()});